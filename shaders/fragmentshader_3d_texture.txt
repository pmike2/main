#version 410 core

uniform sampler3D texture_3d[4];
uniform sampler2DArray reader;
uniform int screen_width;
uniform int screen_height;

out vec4 color;

void main() {
	vec2 uv = vec2(gl_FragCoord.x/ screen_width, gl_FragCoord.y/ screen_height);
	
	color= vec4(0.0);
	vec4 frame;
	vec4 tex;
	for (int i=0; i<4; i++) {
		frame= texture(reader, vec3(uv, float(i)/ 4.0));
		tex= texture(texture_3d[i], frame.xyz);
		color+= vec4(vec3(tex), frame.w);
	}
}
